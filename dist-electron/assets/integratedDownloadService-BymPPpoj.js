class m{async getMinecraftVersions(){var e,r;if(!((r=(e=window.api)==null?void 0:e.versions)!=null&&r.list))throw new Error("API de versiones no disponible");return await window.api.versions.list()}async createInstance(e){var r,n;if(!((n=(r=window.api)==null?void 0:r.instance)!=null&&n.createFull))throw new Error("API de creación de instancias no disponible");return await window.api.instance.createFull(e)}async getRecentLogs(e=50){var r;if(!window.api)throw new Error("API de Electron no disponible");return await((r=window.api.logs)==null?void 0:r.getRecent(e))||[]}async getLogsByType(e,r=50){var n;if(!window.api)throw new Error("API de Electron no disponible");return await((n=window.api.logs)==null?void 0:n.getByType({type:e,count:r}))||[]}async getLogStats(){var e;if(!window.api)throw new Error("API de Electron no disponible");return await((e=window.api.logs)==null?void 0:e.getStats())||{}}async getAllProgressStatuses(){var e;if(!window.api)throw new Error("API de Electron no disponible");return await((e=window.api.progress)==null?void 0:e.getAllStatuses())||[]}async getOverallProgress(){var e;if(!window.api)throw new Error("API de Electron no disponible");return await((e=window.api.progress)==null?void 0:e.getOverall())||{progress:0,statusText:"No disponible",activeOperations:0}}async getDownloadStatuses(){var e;if(!window.api)throw new Error("API de Electron no disponible");return await((e=window.api.progress)==null?void 0:e.getDownloadStatuses())||[]}async getJavaInstallations(){var e,r;return(e=window.api)!=null&&e.java?await((r=window.api.java)==null?void 0:r.getAll())||[]:[]}async detectJava(){var e,r;return(e=window.api)!=null&&e.java?await((r=window.api.java)==null?void 0:r.detect())||[]:[]}async getRecommendedJavaForVersion(e){return"17"}async getFabricVersions(e){try{const r=await fetch(`https://meta.fabricmc.net/v2/versions/loader/${e}`);if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);return await r.json()}catch(r){return console.error("Error al obtener versiones de Fabric:",r),[]}}async getForgeVersions(e){try{console.log(`[Forge] Obteniendo versiones para Minecraft ${e}`);const r=["https://maven.minecraftforge.net/net/minecraftforge/forge/maven-metadata.xml","https://files.minecraftforge.net/net/minecraftforge/forge/maven-metadata.xml"];let n=null,a=null;for(const s of r)try{console.log(`[Forge] Intentando URL: ${s}`);const o=await fetch(s,{headers:{"User-Agent":"DRK-Launcher/1.0"}});if(!o.ok){console.warn(`[Forge] URL ${s} devolvió ${o.status}`);continue}if((o.headers.get("content-type")||"").includes("xml")||s.includes(".xml")){const c=await o.text(),g=new DOMParser().parseFromString(c,"text/xml").getElementsByTagName("version"),d=[];for(let p=0;p<g.length;p++){const u=g[p].textContent;u&&d.push(u)}n={versioning:{versions:d}},console.log(`[Forge] Datos XML recibidos, ${d.length} versiones encontradas`);break}else{n=await o.json(),console.log("[Forge] Datos JSON recibidos:",n);break}}catch(o){console.warn(`[Forge] Error al obtener desde ${s}:`,o.message),a=o;continue}if(!n){console.log("[Forge] Intentando API alternativa de Forge (promociones)...");try{const s=await fetch("https://files.minecraftforge.net/net/minecraftforge/forge/promotions_slim.json",{headers:{"User-Agent":"DRK-Launcher/1.0"}});if(s.ok){const o=await s.json();console.log("[Forge] Datos de promociones recibidos:",o);const t=[];if(o.promos)for(const c in o.promos)c.startsWith(`${e}-`)&&t.push(c);n={versioning:{versions:t}},console.log(`[Forge] ${t.length} versiones extraídas de promociones`)}}catch(s){console.error("[Forge] Error al obtener promociones:",s)}}if(!n||!n.versioning||!n.versioning.versions||!Array.isArray(n.versioning.versions)){if(console.error("[Forge] No se pudieron obtener versiones de ninguna fuente"),a)throw a;return[]}const i=n.versioning.versions.filter(s=>s&&typeof s=="string"&&s.startsWith(`${e}-`));if(console.log(`[Forge] Versiones compatibles encontradas: ${i.length}`,i),i.length===0)return console.warn(`[Forge] No se encontraron versiones compatibles para Minecraft ${e}`),[];const l=i.sort((s,o)=>{const t=s.split("-")[1]||"";return(o.split("-")[1]||"").localeCompare(t,void 0,{numeric:!0,sensitivity:"base"})}).map(s=>({version:s,mcversion:e,type:"release"}));return console.log("[Forge] Versiones procesadas:",l),l}catch(r){return console.error("[Forge] Error al obtener versiones de Forge:",r),[]}}async getQuiltVersions(e){try{const r=await fetch(`https://meta.quiltmc.org/v3/versions/loader/${e}`);if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);return await r.json()}catch(r){return console.error("Error al obtener versiones de Quilt:",r),[]}}async getNeoForgeVersions(e){try{console.log(`[NeoForge] Obteniendo versiones para Minecraft ${e}`);const r=await fetch("https://maven.neoforged.net/api/maven/versions/releases/net/neoforged/neoforge",{headers:{"User-Agent":"DRK-Launcher/1.0"}});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const n=await r.json();console.log("[NeoForge] Datos recibidos:",n);let a=[];if(Array.isArray(n))a=n;else if(n&&n.versions&&Array.isArray(n.versions))a=n.versions,console.log(`[NeoForge] Versiones extraídas del objeto: ${a.length}`);else return console.error("[NeoForge] Estructura de datos inválida:",n),[];const i=a.filter(o=>{let t="";return typeof o=="string"?t=o:o&&o.version?t=o.version:o&&typeof o=="object"&&(t=o.version||o.id||""),t&&t.startsWith(`${e}-`)});if(console.log(`[NeoForge] Versiones compatibles encontradas: ${i.length}`,i),i.length===0)return console.warn(`[NeoForge] No se encontraron versiones compatibles para Minecraft ${e}`),[];const s=i.map(o=>typeof o=="string"?{version:o}:o&&!o.version?{version:o.id||o.name||String(o)}:o).sort((o,t)=>{const c=o.version||"",w=t.version||"",f=c.split("-")[1]||"";return(w.split("-")[1]||"").localeCompare(f,void 0,{numeric:!0,sensitivity:"base"})}).map(o=>({version:o.version||"",mcversion:e,type:o.type||"release"}));return console.log("[NeoForge] Versiones procesadas:",s),s}catch(r){return console.error("[NeoForge] Error al obtener versiones de NeoForge:",r),[]}}}const y=new m;export{y as i};
