const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/javaDownloadService-ClVY1E_u.js","assets/downloadService-CZepbhgC.js","assets/index-D9-UJXTP.js","assets/index-B3KqWKlf.css"])))=>i.map(i=>d[i]);
import{r as s,_ as ue,j as e,p as de}from"./index-D9-UJXTP.js";import{instanceProfileService as C}from"./instanceProfileService-BGr9q1ov.js";import{C as he}from"./CreateInstanceModal-DjJLca7h.js";import{A as ce,m as P}from"./proxy-BcMgV02L.js";import"./integratedDownloadService-Den5n4pl.js";const ge=({instance:r,isOpen:b,onClose:j,onSave:L,onDelete:A})=>{const[w,I]=s.useState(""),[i,g]=s.useState(""),[p,f]=s.useState("vanilla"),[ne,oe]=s.useState(""),[N,V]=s.useState(""),[q,X]=s.useState(""),[M,h]=s.useState(4096),[J,O]=s.useState(1024),[y,Q]=s.useState(8192),[K,Y]=s.useState(1280),[Z,ee]=s.useState(720),[T,W]=s.useState(""),[z,R]=s.useState(null),[S,$]=s.useState(""),[D,ae]=s.useState([]),[le,B]=s.useState([]),[ie,H]=s.useState(null),[v,_]=s.useState("basic");s.useEffect(()=>{var t;b&&r&&(I(r.name),g(r.version),f(r.loader||"vanilla"),oe(r.loaderVersion||""),V(r.javaPath||""),X(r.javaId||""),h(r.maxMemory||4096),Y(r.windowWidth||1280),ee(r.windowHeight||720),W(((t=r.jvmArgs)==null?void 0:t.join(" "))||""),R(new Date(r.createdAt)),$(r.path),E(),te())},[b,r]),s.useEffect(()=>{b&&r&&i&&i!==r.version&&(async()=>{var o,c;try{if((c=(o=window.api)==null?void 0:o.java)!=null&&c.getJavaForMinecraftVersion){const d=await window.api.java.getJavaForMinecraftVersion(i);if(d!==N){V(d);const x=d.match(/java(\d+)/i);if(x&&x[1]){const se=`java${x[1]}`;X(se)}}}}catch(d){console.error("Error al actualizar la ruta de Java para la nueva versión de Minecraft:",d)}})()},[i,b]);const E=async()=>{var t,o;try{if((o=(t=window.api)==null?void 0:t.versions)!=null&&o.list){const d=(await window.api.versions.list()).filter(x=>x.type==="release");ae(d)}}catch(c){console.error("Error al cargar versiones:",c)}},te=async()=>{var t,o;try{if((o=(t=window.api)==null?void 0:t.java)!=null&&o.getAll){const c=await window.api.java.getAll();B(c)}else{const{javaDownloadService:c}=await ue(async()=>{const{javaDownloadService:x}=await import("./javaDownloadService-ClVY1E_u.js");return{javaDownloadService:x}},__vite__mapDeps([0,1,2,3])),d=await c.scanForJavaInstallations();B(d.map(x=>({id:x.id,path:x.executable,version:x.version})))}}catch(c){console.error("Error al cargar Java disponibles:",c)}},re=async t=>{var o,c;if(t.preventDefault(),H(null),!w.trim()){H("El nombre de la instancia es obligatorio");return}if(!i){H("Debes seleccionar una versión de Minecraft");return}try{let d=N||void 0,x=q||void 0;if(r&&r.version!==i&&!N)if((c=(o=window.api)==null?void 0:o.java)!=null&&c.getJavaForMinecraftVersion)d=await window.api.java.getJavaForMinecraftVersion(i);else{const{javaDownloadService:k}=await ue(async()=>{const{javaDownloadService:a}=await import("./javaDownloadService-ClVY1E_u.js");return{javaDownloadService:a}},__vite__mapDeps([0,1,2,3]));d=await k.getJavaForMinecraftVersion(i)}else d=N||void 0,x=q||void 0;const se={...r,name:w,version:i,loader:p,loaderVersion:ne||void 0,javaPath:d,javaId:x,maxMemory:M||void 0,minMemory:J||void 0,windowWidth:K,windowHeight:Z,jvmArgs:T?T.split(" ").filter(k=>k.trim()!==""):void 0,path:S};L(se),j()}catch(d){H(`Error al guardar la instancia: ${d.message||"Error desconocido"}`)}},G=()=>{r&&window.confirm(`¿Estás seguro de que quieres eliminar la instancia "${r.name}"? Esta acción no se puede deshacer.`)&&(A(r.id),j())};return!b||!r?null:e.jsx(ce,{children:e.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-gradient-to-br from-gray-900 via-gray-900 to-gray-800 z-50 flex items-center justify-center p-4",children:e.jsx(P.div,{initial:{scale:.95,y:20,opacity:0},animate:{scale:1,y:0,opacity:1},exit:{scale:.95,y:20,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"bg-gray-900/95 backdrop-blur-xl border border-gray-700/50 rounded-2xl p-1 w-full max-w-4xl max-h-[90vh] overflow-hidden shadow-2xl shadow-blue-500/10",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-900/20 to-purple-900/20 p-1 rounded-2xl",children:e.jsxs("div",{className:"bg-gray-900 rounded-2xl p-6 max-h-[calc(90vh-1rem)] overflow-y-auto custom-scrollbar",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:["Editar Instancia: ",r.name]}),e.jsx("button",{onClick:j,className:"p-2 text-gray-400 hover:text-white hover:bg-gray-800 rounded-full transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:re,children:[e.jsxs("div",{className:"inline-flex items-center bg-gray-800/80 border border-gray-700/70 rounded-2xl p-1 text-xs text-gray-300 mb-6",children:[e.jsx("button",{type:"button",onClick:()=>_("basic"),className:`px-4 py-2 rounded-xl transition-all ${v==="basic"?"bg-gradient-to-r from-blue-500 to-indigo-600 text-black shadow-sm":"text-gray-400 hover:text-gray-200"}`,children:"Básico"}),e.jsx("button",{type:"button",onClick:()=>_("java"),className:`ml-1 px-4 py-2 rounded-xl transition-all ${v==="java"?"bg-gradient-to-r from-green-500 to-emerald-600 text-black shadow-sm":"text-gray-400 hover:text-gray-200"}`,children:"Java"}),e.jsx("button",{type:"button",onClick:()=>_("advanced"),className:`ml-1 px-4 py-2 rounded-xl transition-all ${v==="advanced"?"bg-gradient-to-r from-purple-500 to-pink-600 text-black shadow-sm":"text-gray-400 hover:text-gray-200"}`,children:"Avanzado"})]}),ie&&e.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-r from-red-900/50 to-red-800/30 border border-red-700/50 rounded-xl text-red-200 flex items-start mb-6",children:[e.jsx("svg",{className:"w-6 h-6 mr-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:ie})]}),e.jsxs("div",{className:"space-y-6",children:[v==="basic"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Nombre de la instancia"}),e.jsx("input",{type:"text",value:w,onChange:t=>I(t.target.value),className:"w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Nombre de la instancia"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Versión de Minecraft"}),e.jsxs("select",{value:i,onChange:t=>g(t.target.value),className:"w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[e.jsx("option",{value:"",children:"Selecciona una versión"}),D.map(t=>e.jsxs("option",{value:t.id,children:[t.id," (",t.type,")"]},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Tipo de Loader"}),e.jsxs("select",{value:p,onChange:t=>f(t.target.value),className:"w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[e.jsx("option",{value:"vanilla",children:"Vanilla"}),e.jsx("option",{value:"forge",children:"Forge"}),e.jsx("option",{value:"fabric",children:"Fabric"}),e.jsx("option",{value:"quilt",children:"Quilt"}),e.jsx("option",{value:"neoforge",children:"NeoForge"})]})]}),p!=="vanilla"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Versión del Loader"}),e.jsx("input",{type:"text",value:ne,onChange:t=>oe(t.target.value),className:"w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Versión del loader (por ejemplo: 47.2.0)"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Fecha de creación"}),e.jsx("div",{className:"px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-xl text-gray-300",children:(z==null?void 0:z.toLocaleString())||"Fecha desconocida"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Ruta de la instancia"}),e.jsx("div",{className:"px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-xl text-gray-300 font-mono text-sm break-all",children:S})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"ID de la instancia"}),e.jsx("div",{className:"px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-xl text-gray-300 font-mono text-sm",children:r.id})]})]})]}),v==="java"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Versión de Java"}),e.jsxs("select",{value:q,onChange:t=>X(t.target.value),className:"w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[e.jsx("option",{value:"",children:"Selecciona una versión de Java"}),le.map(t=>e.jsxs("option",{value:t.id,children:["Java ",t.version," - ",t.path]},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Ruta personalizada de Java"}),e.jsx("input",{type:"text",value:N,onChange:t=>V(t.target.value),className:"w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"C:/Program Files/Java/jdk/bin/java.exe"})]}),e.jsxs("div",{className:"bg-gray-800/30 p-4 rounded-xl border border-gray-700/50",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:[e.jsx("svg",{className:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Configuración de Memoria"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Memoria RAM máxima (MB)"}),e.jsxs("span",{className:"text-sm font-medium bg-gradient-to-r from-blue-600 to-purple-600 text-white px-3 py-1 rounded-full min-w-[70px] text-center",children:[M," MB"]})]}),e.jsx("input",{type:"range",min:"1024",max:Math.min(y,16384),value:M,onChange:t=>{const o=parseInt(t.target.value);h(o),O(Math.max(1024,Math.floor(o/4)))},className:"w-full h-2 bg-gradient-to-r from-gray-600 to-gray-700 rounded-lg appearance-none cursor-pointer"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1",children:[e.jsx("span",{children:"1GB"}),e.jsxs("span",{children:[Math.min(y,16384),"MB"]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Memoria RAM mínima (MB)"}),e.jsxs("span",{className:"text-sm font-medium bg-gradient-to-r from-green-600 to-teal-600 text-white px-3 py-1 rounded-full min-w-[70px] text-center",children:[J," MB"]})]}),e.jsx("input",{type:"range",min:"512",max:M,value:J,onChange:t=>O(parseInt(t.target.value)),className:"w-full h-2 bg-gradient-to-r from-gray-600 to-gray-700 rounded-lg appearance-none cursor-pointer"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1",children:[e.jsx("span",{children:"512MB"}),e.jsxs("span",{children:[M,"MB"]})]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-800/30 p-4 rounded-xl border border-gray-700/50",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Dimensiones de la ventana"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Ancho"}),e.jsx("input",{type:"number",value:K,onChange:t=>Y(parseInt(t.target.value)||800),className:"w-full px-3 py-2 bg-gray-700/50 border border-gray-600 rounded-lg text-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",min:"800",max:"3840"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Alto"}),e.jsx("input",{type:"number",value:Z,onChange:t=>ee(parseInt(t.target.value)||600),className:"w-full px-3 py-2 bg-gray-700/50 border border-gray-600 rounded-lg text-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",min:"600",max:"2160"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Argumentos JVM Personalizados"}),e.jsx("textarea",{value:T,onChange:t=>W(t.target.value),className:"w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all min-h-[100px]",placeholder:"-XX:+UseG1GC -Dfml.earlyprogresswindow=false"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:'Separa cada argumento con espacio (por ejemplo: "-XX:+UseG1GC -Xmx4G")'})]})]})]}),v==="advanced"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-800/30 p-6 rounded-xl border border-gray-700/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-200 mb-4",children:"Configuración Avanzada"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Ruta de la instancia"}),e.jsx("input",{type:"text",value:S,onChange:t=>$(t.target.value),className:"w-full px-4 py-3 bg-gray-700/50 border border-gray-600 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",readOnly:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"ID de Instancia"}),e.jsx("input",{type:"text",value:r.id,className:"w-full px-4 py-3 bg-gray-700/50 border border-gray-600 rounded-xl text-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",readOnly:!0})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Perfiles asociados"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:de.getAllProfiles().map(t=>{const o=C.isInstanceLinkedToProfile(r.id,t.username);return e.jsxs("button",{type:"button",onClick:()=>{o?C.unlinkInstanceFromProfile(r.id,t.username):C.linkInstanceToProfile(r.id,t.username)},className:`px-3 py-1 rounded-full text-sm transition-all ${o?"bg-gradient-to-r from-blue-600 to-purple-600 text-white":"bg-gray-700/50 text-gray-300 hover:bg-gray-600/50"}`,children:[t.username," ",o?"✓":""]},t.id)})})]})]}),e.jsxs("div",{className:"bg-red-900/20 p-6 rounded-xl border border-red-700/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-red-200 mb-4",children:"Acciones Peligrosas"}),e.jsx("div",{className:"flex gap-4",children:e.jsxs("button",{type:"button",onClick:G,className:"px-6 py-3 bg-red-700 hover:bg-red-600 text-white rounded-xl transition-colors font-medium flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Eliminar Instancia"]})}),e.jsx("p",{className:"text-sm text-red-400 mt-2",children:"Esta acción eliminará permanentemente la instancia y todos sus archivos."})]})]})]}),e.jsxs("div",{className:"flex justify-between pt-8 border-t border-gray-700/50",children:[e.jsx("button",{type:"button",onClick:G,className:"px-6 py-3 bg-red-700 hover:bg-red-600 text-white rounded-xl transition-colors font-medium",children:"Eliminar"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:j,className:"px-6 py-3 bg-gray-700 hover:bg-gray-600 text-white rounded-xl transition-colors font-medium",children:"Cancelar"}),e.jsxs("button",{type:"submit",className:"px-8 py-3 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 text-white rounded-xl transition-all font-medium flex items-center shadow-lg shadow-blue-500/20",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),"Guardar Cambios"]})]})]})]})]})})})})})};function we({onPlay:r}){const[b,j]=s.useState([]),[L,A]=s.useState([]),[w,I]=s.useState([]),[i,g]=s.useState([]),[p,f]=s.useState("all"),[ne,oe]=s.useState(null),[N,V]=s.useState(null),[q,X]=s.useState(""),[M,h]=s.useState(null),[J,O]=s.useState(""),[y,Q]=s.useState(null),[K,Y]=s.useState([]),[Z,ee]=s.useState(null),[T,W]=s.useState(!1),[z,R]=s.useState(!1),[S,$]=s.useState(""),[D,ae]=s.useState("link"),[le,B]=s.useState(!1),[ie,H]=s.useState({}),v=a=>a.path&&a.path.length>0;s.useEffect(()=>{try{const a=de.getAllProfiles();if(Y(a),a.length>0){const n=de.getCurrentProfile();Q(n||a[0].username)}}catch(a){console.error("Error al cargar perfiles:",a),h("Error al cargar perfiles")}},[]);const _=a=>{const n=a.filter(F=>F.type==="owned"),l=a.filter(F=>F.type==="imported"),u=a.filter(F=>F.type==="shared");A(n),I(l),g(u)},E=async()=>{var a;if(!(!((a=window.api)!=null&&a.instances)||!y))try{if(window.api.instances.scanAndRegister)try{const m=await window.api.instances.scanAndRegister();console.log(`Registro automático completado: ${m.count} instancias nuevas registradas`)}catch(m){console.error("Error al escanear y registrar instancias:",m)}const n=await window.api.instances.list();for(const m of n)C.getInstancesForProfile(y).includes(m.id)||C.getProfileForInstance(m.id)||C.linkInstanceToProfile(m.id,y);const l=await window.api.instances.list(),u=C.getInstancesForProfile(y),xe=l.filter(m=>u.includes(m.id)).map(m=>{let U="owned";m.source?(m.source.startsWith("http")||m.source.includes("\\")||m.source.includes("/"))&&(U="imported"):U="owned";const me=C.getPlayTime(m.id,y);return{...m,totalTimePlayed:me,type:U}});j(xe),_(xe),h(null)}catch(n){console.error("Error en auto-detección de instancias:",n),h(`Error en auto-detección de instancias: ${n.message||"Error desconocido"}`)}};s.useEffect(()=>{if(!y){j([]),A([]),I([]),g([]);return}E()},[y]);const te=async a=>{var l;const n=b.find(u=>u.id===a);if(!(!n||!window.confirm(`¿Estás seguro de que quieres eliminar la instancia "${n.name}"? Esta acción no se puede deshacer y eliminará permanentemente todos los archivos de la instancia.`))){if(!((l=window.api)!=null&&l.instances)){h("Servicio de instancias no disponible aún. Esperando inicialización...");return}try{C.unlinkInstance(a),await window.api.instances.delete(a),E()}catch(u){console.error("Error al eliminar instancia:",u),h(`Error al eliminar instancia: ${u.message||"Error desconocido"}`)}}},re=async a=>{var n;if(!((n=window.api)!=null&&n.instances)){h("Servicio de instancias no disponible aún. Esperando inicialización...");return}try{await window.api.instances.openFolder(a)}catch(l){console.error("Error al abrir carpeta de instancia:",l),h(`Error al abrir carpeta: ${l.message||"Error desconocido"}`)}},G=async a=>{r(a)},t=a=>{V(a)},o=()=>{V(null)},c=async a=>{var n,l;try{(l=(n=window.api)==null?void 0:n.instances)!=null&&l.update&&await window.api.instances.update({id:a.id,patch:{name:a.name,version:a.version,loader:a.loader,ramMb:a.maxMemory,javaPath:a.javaPath,windowWidth:a.windowWidth,windowHeight:a.windowHeight,jvmArgs:a.jvmArgs}}),E(),o()}catch(u){console.error("Error al guardar edición:",u),h(`Error al guardar edición: ${u.message||"Error desconocido"}`)}},d=a=>{ee(a),W(!0)},x=async a=>{var n;if(!((n=window.api)!=null&&n.instances)){h("Servicio de instancias no disponible aún. Esperando inicialización...");return}try{let l;a.startsWith("http")?console.log("Importando desde URL:",a):console.log("Importando desde carpeta:",a),E()}catch(l){console.error("Error al importar instancia:",l),h(`Error al importar instancia: ${l.message||"Error desconocido"}`)}},k=(()=>{let a=[];switch(p){case"owned":a=L;break;case"imported":a=w;break;case"shared":a=i;break;case"all":default:a=b;break}return a.filter(n=>n.name.toLowerCase().includes(J.toLowerCase()))})();return M?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"bg-red-900/30 border border-red-700/50 rounded-xl p-4 text-red-200",children:[e.jsx("h2",{className:"text-lg font-bold mb-2",children:"Error"}),e.jsx("p",{children:M})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Instancias de Minecraft"}),e.jsx("p",{className:"text-gray-400",children:"Gestiona tus instancias de juego y perfiles"})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex flex-wrap gap-2 border-b border-gray-700/50",children:[e.jsxs("button",{onClick:()=>f("all"),className:`px-4 py-2 rounded-t-lg text-sm font-medium transition-colors ${p==="all"?"bg-gray-700/50 text-white border-b-2 border-blue-500":"text-gray-400 hover:text-white hover:bg-gray-700/30"}`,children:["Mis Instancias ",e.jsx("span",{className:"bg-gray-600/50 px-2 py-0.5 rounded-full text-xs ml-1",children:b.length})]}),e.jsxs("button",{onClick:()=>f("owned"),className:`px-4 py-2 rounded-t-lg text-sm font-medium transition-colors ${p==="owned"?"bg-gray-700/50 text-white border-b-2 border-blue-500":"text-gray-400 hover:text-white hover:bg-gray-700/30"}`,children:["Creadas ",e.jsx("span",{className:"bg-gray-600/50 px-2 py-0.5 rounded-full text-xs ml-1",children:L.length})]}),e.jsxs("button",{onClick:()=>f("imported"),className:`px-4 py-2 rounded-t-lg text-sm font-medium transition-colors ${p==="imported"?"bg-gray-700/50 text-white border-b-2 border-blue-500":"text-gray-400 hover:text-white hover:bg-gray-700/30"}`,children:["Importadas ",e.jsx("span",{className:"bg-gray-600/50 px-2 py-0.5 rounded-full text-xs ml-1",children:w.length})]}),e.jsxs("button",{onClick:()=>f("shared"),className:`px-4 py-2 rounded-t-lg text-sm font-medium transition-colors ${p==="shared"?"bg-gray-700/50 text-white border-b-2 border-blue-500":"text-gray-400 hover:text-white hover:bg-gray-700/30"}`,children:["Compartidas ",e.jsx("span",{className:"bg-gray-600/50 px-2 py-0.5 rounded-full text-xs ml-1",children:i.length})]})]})}),e.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Perfil de usuario"}),e.jsx("select",{value:y||"",onChange:a=>Q(a.target.value),className:"w-full p-3 bg-gray-800/50 border border-gray-700/50 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:K.map(a=>e.jsxs("option",{value:a.username,children:[a.username," (",a.type==="microsoft"?"Premium":"No premium",")"]},a.id))})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Buscar instancia"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:J,onChange:a=>O(a.target.value),placeholder:"Buscar por nombre...",className:"w-full p-3 pl-10 bg-gray-800/50 border border-gray-700/50 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]})]}),e.jsxs("div",{className:"mb-6 flex flex-wrap gap-3 justify-end",children:[e.jsxs("button",{onClick:()=>R(!0),className:"px-6 py-3 bg-gradient-to-r from-yellow-600 to-orange-600 hover:from-yellow-500 hover:to-orange-500 text-white rounded-xl transition-all duration-300 shadow-lg shadow-yellow-500/20 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Importar Instancia"]}),e.jsxs("button",{onClick:()=>B(!0),className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 text-white rounded-xl transition-all duration-300 shadow-lg shadow-blue-500/20 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Crear Instancia"]})]}),k.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"mx-auto w-24 h-24 bg-gray-800/50 rounded-full flex items-center justify-center mb-4",children:e.jsx("svg",{className:"w-12 h-12 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-300 mb-2",children:"No hay instancias"}),e.jsx("p",{className:"text-gray-500",children:"Crea una nueva instancia para comenzar a jugar"}),e.jsx("button",{onClick:()=>B(!0),className:"mt-4 px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 text-white rounded-xl transition-all duration-300",children:"Crear Primera Instancia"})]}):e.jsx(P.div,{layout:!0,className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:k.map(a=>e.jsxs(P.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},whileHover:{y:-5},className:"bg-gray-800/50 backdrop-blur-sm border border-gray-700/50 rounded-xl p-4 transition-all duration-300 hover:bg-gray-800/70 hover:border-gray-600/50",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-white truncate max-w-[70%]",children:a.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:"text-xs bg-gray-700/50 text-gray-300 px-2 py-1 rounded-full",children:a.version}),a.loader&&e.jsx("span",{className:"text-xs bg-blue-900/50 text-blue-300 px-2 py-1 rounded-full",children:a.loader}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${a.type==="owned"?"bg-green-900/50 text-green-300":a.type==="imported"?"bg-yellow-900/50 text-yellow-300":"bg-purple-900/50 text-purple-300"}`,children:a.type==="owned"?"Creada":a.type==="imported"?"Importada":"Compartida"})]})]}),e.jsx("div",{className:"text-xs text-gray-400",children:new Date(a.createdAt).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"})})]}),e.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-400",children:[e.jsxs("div",{children:["Jugado: ",a.lastPlayed?new Date(a.lastPlayed).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"}):"Nunca"]}),e.jsxs("div",{children:["Tiempo total: ",a.totalTimePlayed?(()=>{const n=Math.floor(a.totalTimePlayed/6e4);if(n<60)return`${n} min`;if(n<1440){const l=Math.floor(n/60),u=n%60;return`${l}h ${u}min`}else{const l=Math.floor(n/1440),u=Math.floor(n%1440/60);return`${l}d ${u}h`}})():"0 min"]})]}),!v(a)&&e.jsx("div",{className:"text-xs bg-yellow-900/50 text-yellow-300 px-2 py-1 rounded-full",children:"Pendiente"})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>G(a.id),className:`flex-1 min-w-[70px] px-3 py-2 rounded-lg transition-colors text-sm ${v(a)?"bg-green-600 hover:bg-green-500 text-white":"bg-gray-700 hover:bg-gray-600 text-gray-400 cursor-not-allowed"}`,disabled:!v(a),children:v(a)?"Jugar":"Pendiente"}),e.jsx("button",{onClick:()=>re(a.id),className:"flex-1 min-w-[70px] px-3 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors text-sm",children:"Carpeta"}),e.jsx("button",{onClick:()=>t(a),className:"px-3 py-2 bg-blue-700 hover:bg-blue-600 text-white rounded-lg transition-colors text-sm",title:"Editar Instancia",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{onClick:()=>d(a),className:"px-3 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors text-sm",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("button",{onClick:()=>te(a.id),className:"px-3 py-2 bg-red-700 hover:bg-red-600 text-white rounded-lg transition-colors text-sm",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},a.id))}),e.jsx("div",{className:"mt-8 text-center text-gray-500 text-sm",children:e.jsxs("p",{children:[k.length," instancia",k.length!==1?"s":""," encontrada",k.length!==1?"s":""]})})]}),e.jsx(pe,{instance:Z,isOpen:T,onClose:()=>W(!1),onPlay:G,onOpenFolder:re}),e.jsx(ce,{children:z&&e.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs(P.div,{initial:{scale:.95,y:20},animate:{scale:1,y:0},exit:{scale:.95,y:20},className:"bg-gray-800/90 border border-gray-700/50 rounded-xl p-6 w-full max-w-md",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Importar Instancia"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Tipo de importación"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{type:"button",onClick:()=>ae("link"),className:`flex-1 py-2 rounded-lg border ${D==="link"?"bg-blue-600 border-blue-500 text-white":"bg-gray-700/50 border-gray-600 text-gray-300"}`,children:"Link"}),e.jsx("button",{type:"button",onClick:()=>ae("folder"),className:`flex-1 py-2 rounded-lg border ${D==="folder"?"bg-blue-600 border-blue-500 text-white":"bg-gray-700/50 border-gray-600 text-gray-300"}`,children:"Carpeta"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:D==="link"?"URL de la instancia":"Ruta de la carpeta"}),e.jsx("input",{type:"text",value:S,onChange:a=>$(a.target.value),placeholder:D==="link"?"https://ejemplo.com/instancia.zip":"C:/ruta/a/la/carpeta",className:"w-full p-3 bg-gray-700/50 border border-gray-600/50 rounded-xl text-white"})]}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{onClick:()=>{R(!1),$("")},className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors",children:"Cancelar"}),e.jsx("button",{onClick:async()=>{if(!S.trim()){h("Por favor, introduce una URL o ruta válida");return}await x(S),R(!1),$("")},className:"px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg transition-colors",children:"Importar"})]})]})})}),e.jsx(he,{isOpen:le,onClose:()=>B(!1),onCreated:()=>{E()}}),N&&e.jsx(ge,{instance:N,isOpen:!!N,onClose:o,onSave:c,onDelete:te})]})}const pe=({instance:r,isOpen:b,onClose:j,onPlay:L,onOpenFolder:A})=>{if(!b||!r)return null;const w=i=>new Date(i).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),I=i=>{if(!i)return"0 min";const g=Math.floor(i/(1e3*60));if(g<60)return`${g} min`;if(g<1440){const p=Math.floor(g/60),f=g%60;return`${p}h ${f}min`}else{const p=Math.floor(g/1440),f=Math.floor(g%1440/60);return`${p}d ${f}h`}};return e.jsx(ce,{children:b&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm",children:e.jsx(P.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"w-full max-w-2xl",children:e.jsx("div",{className:"bg-gray-800/95 border border-gray-700/50 rounded-xl shadow-2xl overflow-hidden backdrop-blur-sm",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-1",children:r.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("span",{className:"text-sm bg-gray-700/50 text-gray-300 px-3 py-1 rounded-full",children:r.version}),r.loader&&e.jsx("span",{className:"text-sm bg-blue-900/50 text-blue-300 px-3 py-1 rounded-full",children:r.loader}),e.jsx("span",{className:"text-sm bg-green-900/50 text-green-300 px-3 py-1 rounded-full",children:"Instancia"})]})]}),e.jsx("button",{onClick:j,className:"p-2 text-gray-400 hover:text-white hover:bg-gray-700/50 rounded-full transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-700/30 p-4 rounded-xl",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Información General"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"ID:"}),e.jsxs("span",{className:"text-white font-mono text-sm",children:[r.id.substring(0,8),"..."]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Versión:"}),e.jsx("span",{className:"text-white",children:r.version})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Loader:"}),e.jsx("span",{className:"text-white",children:r.loader||"Vanilla"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Creada:"}),e.jsx("span",{className:"text-white",children:w(r.createdAt)})]})]})]}),e.jsxs("div",{className:"bg-gray-700/30 p-4 rounded-xl",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Estadísticas de Juego"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Última sesión:"}),e.jsx("span",{className:"text-white",children:r.lastPlayed?w(r.lastPlayed):"Nunca"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Tiempo total:"}),e.jsx("span",{className:"text-white",children:I(r.totalTimePlayed)})]})]})]})]}),e.jsxs("div",{className:"mt-6 bg-gray-700/30 p-4 rounded-xl",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Ubicación"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-gray-300 text-sm font-mono break-all",children:r.path}),e.jsx("button",{onClick:()=>A(r.id),className:"ml-4 px-4 py-2 bg-gray-600 hover:bg-gray-500 text-white rounded-lg transition-colors text-sm",children:"Abrir carpeta"})]})]}),e.jsx("div",{className:"mt-6 flex justify-end space-x-3",children:e.jsxs("button",{onClick:()=>L(r.id),className:"px-6 py-3 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 text-white rounded-lg transition-all flex items-center gap-2",children:[e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),"Jugar"]})})]})})})})})};export{we as default};
