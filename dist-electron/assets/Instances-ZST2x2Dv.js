const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/javaDownloadService-CgpONXhi.js","assets/downloadService-Dsuggy7c.js","assets/index-B4gXKQI1.js","assets/index-CrcgcGby.css"])))=>i.map(i=>d[i]);
import{r as a,_ as fe,j as e,p as ue,n as xe}from"./index-B4gXKQI1.js";import{instanceProfileService as A}from"./instanceProfileService-CzkHMZn9.js";import{C as Ne}from"./CreateInstanceModal-CjhLKZAt.js";import{A as de}from"./index-nQ1ubJpC.js";import{m as J}from"./proxy-Gda4LNmf.js";import{C as ke}from"./ConfirmationModal-Cdcg62x0.js";import"./integratedDownloadService-C5v-R2yv.js";import"os";const Ce=({instance:s,isOpen:y,onClose:v,onSave:V,onDelete:N})=>{const[j,C]=a.useState(""),[c,g]=a.useState(""),[i,p]=a.useState("vanilla"),[D,E]=a.useState(""),[w,L]=a.useState(""),[z,F]=a.useState(""),[M,b]=a.useState(4096),[$,l]=a.useState(1024),[o,T]=a.useState(8192),[ae,se]=a.useState(1280),[re,oe]=a.useState(720),[U,O]=a.useState(""),[X,Q]=a.useState(null),[W,R]=a.useState(""),[H,ne]=a.useState([]),[ce,G]=a.useState([]),[k,I]=a.useState(null),[B,P]=a.useState("basic");a.useEffect(()=>{var r;y&&s&&(C(s.name),g(s.version),p(s.loader||"vanilla"),E(s.loaderVersion||""),L(s.javaPath||""),F(s.javaId||""),b(s.maxMemory||4096),se(s.windowWidth||1280),oe(s.windowHeight||720),O(((r=s.jvmArgs)==null?void 0:r.join(" "))||""),Q(new Date(s.createdAt)),R(s.path),me(),le())},[y,s]),a.useEffect(()=>{y&&s&&c&&c!==s.version&&(async()=>{var m,x;try{if((x=(m=window.api)==null?void 0:m.java)!=null&&x.getJavaForMinecraftVersion){const h=await window.api.java.getJavaForMinecraftVersion(c);if(h!==w){L(h);const d=h.match(/java(\d+)/i);if(d&&d[1]){const _=`java${d[1]}`;F(_)}}}}catch(h){console.error("Error al actualizar la ruta de Java para la nueva versión de Minecraft:",h)}})()},[c,y]);const me=async()=>{var r,m;try{if((m=(r=window.api)==null?void 0:r.versions)!=null&&m.list){const h=(await window.api.versions.list()).filter(d=>d.type==="release");ne(h)}}catch(x){console.error("Error al cargar versiones:",x)}},le=async()=>{var r,m;try{if((m=(r=window.api)==null?void 0:r.java)!=null&&m.getAll){const x=await window.api.java.getAll();G(x)}else{const{javaDownloadService:x}=await fe(async()=>{const{javaDownloadService:d}=await import("./javaDownloadService-CgpONXhi.js");return{javaDownloadService:d}},__vite__mapDeps([0,1,2,3])),h=await x.scanForJavaInstallations();G(h.map(d=>({id:d.id,path:d.executable,version:d.version})))}}catch(x){console.error("Error al cargar Java disponibles:",x)}},K=async r=>{var m,x;if(r.preventDefault(),I(null),!j.trim()){I("El nombre de la instancia es obligatorio");return}if(!c){I("Debes seleccionar una versión de Minecraft");return}try{let h=w||void 0,d=z||void 0;if(s&&s.version!==c&&!w)if((x=(m=window.api)==null?void 0:m.java)!=null&&x.getJavaForMinecraftVersion)h=await window.api.java.getJavaForMinecraftVersion(c);else{const{javaDownloadService:Z}=await fe(async()=>{const{javaDownloadService:ie}=await import("./javaDownloadService-CgpONXhi.js");return{javaDownloadService:ie}},__vite__mapDeps([0,1,2,3]));h=await Z.getJavaForMinecraftVersion(c)}else h=w||void 0,d=z||void 0;const _={...s,name:j,version:c,loader:i,loaderVersion:D||void 0,javaPath:h,javaId:d,maxMemory:M||void 0,minMemory:$||void 0,windowWidth:ae,windowHeight:re,jvmArgs:U?U.split(" ").filter(Z=>Z.trim()!==""):void 0,path:W};V(_),v()}catch(h){I(`Error al guardar la instancia: ${h.message||"Error desconocido"}`)}},Y=()=>{s&&window.confirm(`¿Estás seguro de que quieres eliminar la instancia "${s.name}"? Esta acción no se puede deshacer.`)&&(N(s.id),v())};return!y||!s?null:e.jsx(de,{children:e.jsx(J.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-gradient-to-br from-gray-900 via-gray-900 to-gray-800 z-50 flex items-center justify-center p-4",children:e.jsx(J.div,{initial:{scale:.95,y:20,opacity:0},animate:{scale:1,y:0,opacity:1},exit:{scale:.95,y:20,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"bg-gray-900/95 backdrop-blur-xl border border-gray-700/50 rounded-2xl p-1 w-full max-w-4xl max-h-[90vh] overflow-hidden shadow-2xl shadow-blue-500/10",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-900/20 to-purple-900/20 p-1 rounded-2xl",children:e.jsxs("div",{className:"bg-gray-900 rounded-2xl p-6 max-h-[calc(90vh-1rem)] overflow-y-auto custom-scrollbar",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:["Editar Instancia: ",s.name]}),e.jsx("button",{onClick:v,className:"p-2 text-gray-400 hover:text-white hover:bg-gray-800 rounded-full transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:K,children:[e.jsxs("div",{className:"inline-flex items-center bg-gray-800/80 border border-gray-700/70 rounded-2xl p-1 text-xs text-gray-300 mb-6",children:[e.jsx("button",{type:"button",onClick:()=>P("basic"),className:`px-4 py-2 rounded-xl transition-all ${B==="basic"?"bg-gradient-to-r from-blue-500 to-indigo-600 text-black shadow-sm":"text-gray-400 hover:text-gray-200"}`,children:"Básico"}),e.jsx("button",{type:"button",onClick:()=>P("java"),className:`ml-1 px-4 py-2 rounded-xl transition-all ${B==="java"?"bg-gradient-to-r from-green-500 to-emerald-600 text-black shadow-sm":"text-gray-400 hover:text-gray-200"}`,children:"Java"}),e.jsx("button",{type:"button",onClick:()=>P("advanced"),className:`ml-1 px-4 py-2 rounded-xl transition-all ${B==="advanced"?"bg-gradient-to-r from-purple-500 to-pink-600 text-black shadow-sm":"text-gray-400 hover:text-gray-200"}`,children:"Avanzado"})]}),k&&e.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-r from-red-900/50 to-red-800/30 border border-red-700/50 rounded-xl text-red-200 flex items-start mb-6",children:[e.jsx("svg",{className:"w-6 h-6 mr-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:k})]}),e.jsxs("div",{className:"space-y-6",children:[B==="basic"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Nombre de la instancia"}),e.jsx("input",{type:"text",value:j,onChange:r=>C(r.target.value),className:"w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Nombre de la instancia"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Versión de Minecraft"}),e.jsxs("select",{value:c,onChange:r=>g(r.target.value),className:"w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[e.jsx("option",{value:"",children:"Selecciona una versión"}),H.map(r=>e.jsxs("option",{value:r.id,children:[r.id," (",r.type,")"]},r.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Tipo de Loader"}),e.jsxs("select",{value:i,onChange:r=>p(r.target.value),className:"w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[e.jsx("option",{value:"vanilla",children:"Vanilla"}),e.jsx("option",{value:"forge",children:"Forge"}),e.jsx("option",{value:"fabric",children:"Fabric"}),e.jsx("option",{value:"quilt",children:"Quilt"}),e.jsx("option",{value:"neoforge",children:"NeoForge"})]})]}),i!=="vanilla"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Versión del Loader"}),e.jsx("input",{type:"text",value:D,onChange:r=>E(r.target.value),className:"w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Versión del loader (por ejemplo: 47.2.0)"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Fecha de creación"}),e.jsx("div",{className:"px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-xl text-gray-300",children:(X==null?void 0:X.toLocaleString())||"Fecha desconocida"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Ruta de la instancia"}),e.jsx("div",{className:"px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-xl text-gray-300 font-mono text-sm break-all",children:W})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"ID de la instancia"}),e.jsx("div",{className:"px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-xl text-gray-300 font-mono text-sm",children:s.id})]})]})]}),B==="java"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Versión de Java"}),e.jsxs("select",{value:z,onChange:r=>F(r.target.value),className:"w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[e.jsx("option",{value:"",children:"Selecciona una versión de Java"}),ce.map(r=>e.jsxs("option",{value:r.id,children:["Java ",r.version," - ",r.path]},r.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Ruta personalizada de Java"}),e.jsx("input",{type:"text",value:w,onChange:r=>L(r.target.value),className:"w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"C:/Program Files/Java/jdk/bin/java.exe"})]}),e.jsxs("div",{className:"bg-gray-800/30 p-4 rounded-xl border border-gray-700/50",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:[e.jsx("svg",{className:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Configuración de Memoria"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Memoria RAM máxima (MB)"}),e.jsxs("span",{className:"text-sm font-medium bg-gradient-to-r from-blue-600 to-purple-600 text-white px-3 py-1 rounded-full min-w-[70px] text-center",children:[M," MB"]})]}),e.jsx("input",{type:"range",min:"1024",max:Math.min(o,16384),value:M,onChange:r=>{const m=parseInt(r.target.value);b(m),l(Math.max(1024,Math.floor(m/4)))},className:"w-full h-2 bg-gradient-to-r from-gray-600 to-gray-700 rounded-lg appearance-none cursor-pointer"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1",children:[e.jsx("span",{children:"1GB"}),e.jsxs("span",{children:[Math.min(o,16384),"MB"]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Memoria RAM mínima (MB)"}),e.jsxs("span",{className:"text-sm font-medium bg-gradient-to-r from-green-600 to-teal-600 text-white px-3 py-1 rounded-full min-w-[70px] text-center",children:[$," MB"]})]}),e.jsx("input",{type:"range",min:"512",max:M,value:$,onChange:r=>l(parseInt(r.target.value)),className:"w-full h-2 bg-gradient-to-r from-gray-600 to-gray-700 rounded-lg appearance-none cursor-pointer"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1",children:[e.jsx("span",{children:"512MB"}),e.jsxs("span",{children:[M,"MB"]})]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-800/30 p-4 rounded-xl border border-gray-700/50",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Dimensiones de la ventana"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Ancho"}),e.jsx("input",{type:"number",value:ae,onChange:r=>se(parseInt(r.target.value)||800),className:"w-full px-3 py-2 bg-gray-700/50 border border-gray-600 rounded-lg text-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",min:"800",max:"3840"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Alto"}),e.jsx("input",{type:"number",value:re,onChange:r=>oe(parseInt(r.target.value)||600),className:"w-full px-3 py-2 bg-gray-700/50 border border-gray-600 rounded-lg text-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",min:"600",max:"2160"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Argumentos JVM Personalizados"}),e.jsx("textarea",{value:U,onChange:r=>O(r.target.value),className:"w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all min-h-[100px]",placeholder:"-XX:+UseG1GC -Dfml.earlyprogresswindow=false"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:'Separa cada argumento con espacio (por ejemplo: "-XX:+UseG1GC -Xmx4G")'})]})]})]}),B==="advanced"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-800/30 p-6 rounded-xl border border-gray-700/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-200 mb-4",children:"Configuración Avanzada"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Ruta de la instancia"}),e.jsx("input",{type:"text",value:W,onChange:r=>R(r.target.value),className:"w-full px-4 py-3 bg-gray-700/50 border border-gray-600 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",readOnly:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"ID de Instancia"}),e.jsx("input",{type:"text",value:s.id,className:"w-full px-4 py-3 bg-gray-700/50 border border-gray-600 rounded-xl text-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",readOnly:!0})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Perfiles asociados"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:ue.getAllProfiles().map(r=>{const m=A.isInstanceLinkedToProfile(s.id,r.username);return e.jsxs("button",{type:"button",onClick:()=>{m?A.unlinkInstanceFromProfile(s.id,r.username):A.linkInstanceToProfile(s.id,r.username)},className:`px-3 py-1 rounded-full text-sm transition-all ${m?"bg-gradient-to-r from-blue-600 to-purple-600 text-white":"bg-gray-700/50 text-gray-300 hover:bg-gray-600/50"}`,children:[r.username," ",m?"✓":""]},r.id)})})]})]}),e.jsxs("div",{className:"bg-red-900/20 p-6 rounded-xl border border-red-700/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-red-200 mb-4",children:"Acciones Peligrosas"}),e.jsx("div",{className:"flex gap-4",children:e.jsxs("button",{type:"button",onClick:Y,className:"px-6 py-3 bg-red-700 hover:bg-red-600 text-white rounded-xl transition-colors font-medium flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Eliminar Instancia"]})}),e.jsx("p",{className:"text-sm text-red-400 mt-2",children:"Esta acción eliminará permanentemente la instancia y todos sus archivos."})]})]})]}),e.jsxs("div",{className:"flex justify-between pt-8 border-t border-gray-700/50",children:[e.jsx("button",{type:"button",onClick:Y,className:"px-6 py-3 bg-red-700 hover:bg-red-600 text-white rounded-xl transition-colors font-medium",children:"Eliminar"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:v,className:"px-6 py-3 bg-gray-700 hover:bg-gray-600 text-white rounded-xl transition-colors font-medium",children:"Cancelar"}),e.jsxs("button",{type:"submit",className:"px-8 py-3 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 text-white rounded-xl transition-all font-medium flex items-center shadow-lg shadow-blue-500/20",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),"Guardar Cambios"]})]})]})]})]})})})})})};function Le({instanceId:s,instanceName:y,isOpen:v,onClose:V}){const[N,j]=a.useState([]),[C,c]=a.useState(!1),[g,i]=a.useState(null),[p,D]=a.useState(!0),E=a.useRef(null),w=a.useRef(null);a.useEffect(()=>{if(v&&s){const l=setTimeout(()=>{L()},100),o=setInterval(()=>{L()},1e3);return()=>{clearTimeout(l),clearInterval(o)}}},[v,s]),a.useEffect(()=>{p&&E.current&&E.current.scrollIntoView({behavior:"smooth"})},[N,p]);const L=async()=>{try{if(!window.api){i("API no disponible. Por favor, recarga la aplicación.");return}if(!window.api.game){i("API de juego no disponible. Por favor, recarga la aplicación.");return}if(typeof window.api.game.getLogs!="function"){console.warn("[GameLogsModal] window.api.game.getLogs no es una función",typeof window.api.game.getLogs),console.log("[GameLogsModal] window.api.game disponible:",window.api.game),console.log("[GameLogsModal] Métodos disponibles en window.api.game:",Object.keys(window.api.game||{})),i("Método getLogs no disponible. Por favor, recarga la aplicación.");return}const l=await window.api.game.getLogs(s);l&&Array.isArray(l)?(j(l),i(null)):(j([]),i(null))}catch(l){console.error("Error al cargar logs:",l),i(`Error al cargar logs: ${l.message||"Error desconocido"}`)}},z=()=>{if(w.current){const{scrollTop:l,scrollHeight:o,clientHeight:T}=w.current;D(o-l-T<100)}},F=()=>{E.current&&(E.current.scrollIntoView({behavior:"smooth"}),D(!0))},M=async()=>{var l,o;try{(o=(l=window.api)==null?void 0:l.game)!=null&&o.clearLogs&&(await window.api.game.clearLogs(s),j([]))}catch(T){console.error("Error al limpiar logs:",T)}},b=()=>{const l=N.join(`
`);navigator.clipboard.writeText(l).then(()=>{const o=document.createElement("div");o.textContent="Logs copiados al portapapeles",o.className="fixed top-4 right-4 bg-green-600 text-white px-4 py-2 rounded-lg z-50",document.body.appendChild(o),setTimeout(()=>{document.body.removeChild(o)},2e3)})},$=l=>{const o=l.toLowerCase();return o.includes("error")||o.includes("exception")||o.includes("failed")?"text-red-400":o.includes("warn")||o.includes("warning")?"text-yellow-400":o.includes("info")||o.includes("loading")?"text-blue-400":o.includes("success")||o.includes("done")?"text-green-400":"text-gray-300"};return v?e.jsx(de,{children:e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm",children:e.jsxs(J.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"w-full max-w-4xl h-[80vh] bg-gray-800/95 border border-gray-700/50 rounded-xl shadow-2xl overflow-hidden backdrop-blur-sm flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-700/50 bg-gray-900/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-600/20 rounded-lg",children:e.jsx("svg",{className:"w-6 h-6 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Logs del Juego"}),e.jsx("p",{className:"text-sm text-gray-400",children:y})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:b,className:"px-3 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors text-sm flex items-center gap-2",title:"Copiar logs",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Copiar"]}),e.jsxs("button",{onClick:M,className:"px-3 py-2 bg-yellow-700 hover:bg-yellow-600 text-white rounded-lg transition-colors text-sm flex items-center gap-2",title:"Limpiar logs",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Limpiar"]}),!p&&e.jsx("button",{onClick:F,className:"px-3 py-2 bg-blue-700 hover:bg-blue-600 text-white rounded-lg transition-colors text-sm flex items-center gap-2",title:"Ir al final",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})}),e.jsx("button",{onClick:V,className:"p-2 text-gray-400 hover:text-white hover:bg-gray-700/50 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})]}),e.jsx("div",{ref:w,onScroll:z,className:"flex-1 overflow-y-auto p-4 bg-gray-900/50 font-mono text-sm",children:g?e.jsxs("div",{className:"text-red-400 p-4 bg-red-900/20 rounded-lg border border-red-700/50",children:[e.jsx("p",{className:"font-semibold mb-2",children:g}),g.includes("no disponible")&&e.jsxs("div",{className:"text-sm text-red-300 mt-2",children:[e.jsx("p",{className:"mb-1",children:"Por favor, intenta:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"Recargar la aplicación (Ctrl+R o Cmd+R)"}),e.jsx("li",{children:"Reiniciar el launcher"}),e.jsx("li",{children:"Verificar que el juego se haya ejecutado al menos una vez"})]})]})]}):N.length===0?e.jsxs("div",{className:"text-center text-gray-500 py-12",children:[e.jsx("svg",{className:"w-16 h-16 mx-auto mb-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("p",{className:"text-lg font-semibold mb-2",children:"No hay logs disponibles"}),e.jsx("p",{className:"text-sm",children:"Los logs aparecerán aquí cuando ejecutes el juego"})]}):e.jsxs("div",{className:"space-y-1",children:[N.map((l,o)=>e.jsx("div",{className:`${$(l)} break-words whitespace-pre-wrap`,children:l},o)),e.jsx("div",{ref:E})]})}),e.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-gray-700/50 bg-gray-900/50 text-xs text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{children:[N.length," líneas"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:p,onChange:l=>D(l.target.checked),className:"rounded"}),e.jsx("span",{children:"Auto-scroll"})]})]}),e.jsx("button",{onClick:L,disabled:C,className:"px-3 py-1 bg-gray-700 hover:bg-gray-600 text-white rounded transition-colors disabled:opacity-50",children:C?"Cargando...":"Actualizar"})]})]})})}):null}function Je({onPlay:s}){const[y,v]=a.useState([]),[V,N]=a.useState([]),[j,C]=a.useState([]),[c,g]=a.useState([]),[i,p]=a.useState("all"),[D,E]=a.useState(null),[w,L]=a.useState(null),[z,F]=a.useState(""),[M,b]=a.useState(null),[$,l]=a.useState(""),[o,T]=a.useState(null),[ae,se]=a.useState([]),[re,oe]=a.useState(null),[U,O]=a.useState(!1),[X,Q]=a.useState(!1),[W,R]=a.useState(""),[H,ne]=a.useState("link"),[ce,G]=a.useState(!1),[k,I]=a.useState(null),[B,P]=a.useState(!1),[me,le]=a.useState(!1),[K,Y]=a.useState(null),[r,m]=a.useState({}),x=t=>t.path&&t.path.length>0;a.useEffect(()=>{try{const t=ue.getAllProfiles();if(se(t),t.length>0){const n=ue.getCurrentProfile();T(n||t[0].username)}}catch(t){console.error("Error al cargar perfiles:",t),b("Error al cargar perfiles")}},[]);const h=t=>{const n=t.filter(q=>q.type==="owned"),u=t.filter(q=>q.type==="imported"),S=t.filter(q=>q.type==="shared");N(n),C(u),g(S)},d=async()=>{var t;if(!(!((t=window.api)!=null&&t.instances)||!o))try{if(window.api.instances.scanAndRegister)try{const f=await window.api.instances.scanAndRegister();console.log(`Registro automático completado: ${f.count} instancias nuevas registradas`)}catch(f){console.error("Error al escanear y registrar instancias:",f)}const n=await window.api.instances.list();for(const f of n)A.getInstancesForProfile(o).includes(f.id)||A.getProfileForInstance(f.id)||A.linkInstanceToProfile(f.id,o);const u=await window.api.instances.list(),S=A.getInstancesForProfile(o),pe=u.filter(f=>S.includes(f.id)).map(f=>{let te="owned";f.source?(f.source.startsWith("http")||f.source.includes("\\")||f.source.includes("/"))&&(te="imported"):te="owned";const be=A.getPlayTime(f.id,o);return{...f,totalTimePlayed:be,type:te}});v(pe),h(pe),b(null)}catch(n){console.error("Error en auto-detección de instancias:",n),b(`Error en auto-detección de instancias: ${n.message||"Error desconocido"}`)}};a.useEffect(()=>{if(!o){v([]),N([]),C([]),g([]);return}d()},[o]);const _=async t=>{const n=y.find(u=>u.id===t);n&&(I(n),P(!0))},Z=async()=>{var t;if(k){if(!((t=window.api)!=null&&t.instances)){b("Servicio de instancias no disponible aún. Esperando inicialización..."),P(!1),I(null);return}try{A.unlinkInstance(k.id),await window.api.instances.delete(k.id),xe.showNotification({type:"success",title:"Instancia eliminada",message:`La instancia "${k.name}" ha sido eliminada correctamente.`,duration:3e3}),d(),P(!1),I(null)}catch(n){console.error("Error al eliminar instancia:",n),b(`Error al eliminar instancia: ${n.message||"Error desconocido"}`),xe.showNotification({type:"error",title:"Error al eliminar",message:`No se pudo eliminar la instancia "${k.name}".`,duration:4e3}),P(!1),I(null)}}},ie=async t=>{var n;if(!((n=window.api)!=null&&n.instances)){b("Servicio de instancias no disponible aún. Esperando inicialización...");return}try{await window.api.instances.openFolder(t)}catch(u){console.error("Error al abrir carpeta de instancia:",u),b(`Error al abrir carpeta: ${u.message||"Error desconocido"}`)}},he=async t=>{s(t)},ye=t=>{L(t)},ge=()=>{L(null)},ve=async t=>{var n,u;try{(u=(n=window.api)==null?void 0:n.instances)!=null&&u.update&&await window.api.instances.update({id:t.id,patch:{name:t.name,version:t.version,loader:t.loader,ramMb:t.maxMemory,javaPath:t.javaPath,windowWidth:t.windowWidth,windowHeight:t.windowHeight,jvmArgs:t.jvmArgs}}),d(),ge()}catch(S){console.error("Error al guardar edición:",S),b(`Error al guardar edición: ${S.message||"Error desconocido"}`)}},je=t=>{oe(t),O(!0)},we=async t=>{var n;if(!((n=window.api)!=null&&n.instances)){b("Servicio de instancias no disponible aún. Esperando inicialización...");return}try{let u;t.startsWith("http")?console.log("Importando desde URL:",t):console.log("Importando desde carpeta:",t),d()}catch(u){console.error("Error al importar instancia:",u),b(`Error al importar instancia: ${u.message||"Error desconocido"}`)}},ee=(()=>{let t=[];switch(i){case"owned":t=V;break;case"imported":t=j;break;case"shared":t=c;break;case"all":default:t=y;break}return t.filter(n=>n.name.toLowerCase().includes($.toLowerCase()))})();return M?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"bg-red-900/30 border border-red-700/50 rounded-xl p-4 text-red-200",children:[e.jsx("h2",{className:"text-lg font-bold mb-2",children:"Error"}),e.jsx("p",{children:M})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Instancias de Minecraft"}),e.jsx("p",{className:"text-gray-400",children:"Gestiona tus instancias de juego y perfiles"})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex flex-wrap gap-2 border-b border-gray-700/50",children:[e.jsxs("button",{onClick:()=>p("all"),className:`px-4 py-2 rounded-t-lg text-sm font-medium transition-colors ${i==="all"?"bg-gray-700/50 text-white border-b-2 border-blue-500":"text-gray-400 hover:text-white hover:bg-gray-700/30"}`,children:["Mis Instancias ",e.jsx("span",{className:"bg-gray-600/50 px-2 py-0.5 rounded-full text-xs ml-1",children:y.length})]}),e.jsxs("button",{onClick:()=>p("owned"),className:`px-4 py-2 rounded-t-lg text-sm font-medium transition-colors ${i==="owned"?"bg-gray-700/50 text-white border-b-2 border-blue-500":"text-gray-400 hover:text-white hover:bg-gray-700/30"}`,children:["Creadas ",e.jsx("span",{className:"bg-gray-600/50 px-2 py-0.5 rounded-full text-xs ml-1",children:V.length})]}),e.jsxs("button",{onClick:()=>p("imported"),className:`px-4 py-2 rounded-t-lg text-sm font-medium transition-colors ${i==="imported"?"bg-gray-700/50 text-white border-b-2 border-blue-500":"text-gray-400 hover:text-white hover:bg-gray-700/30"}`,children:["Importadas ",e.jsx("span",{className:"bg-gray-600/50 px-2 py-0.5 rounded-full text-xs ml-1",children:j.length})]}),e.jsxs("button",{onClick:()=>p("shared"),className:`px-4 py-2 rounded-t-lg text-sm font-medium transition-colors ${i==="shared"?"bg-gray-700/50 text-white border-b-2 border-blue-500":"text-gray-400 hover:text-white hover:bg-gray-700/30"}`,children:["Compartidas ",e.jsx("span",{className:"bg-gray-600/50 px-2 py-0.5 rounded-full text-xs ml-1",children:c.length})]})]})}),e.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Perfil de usuario"}),e.jsx("select",{value:o||"",onChange:t=>T(t.target.value),className:"w-full p-3 bg-gray-800/50 border border-gray-700/50 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:ae.map(t=>e.jsxs("option",{value:t.username,children:[t.username," (",t.type==="microsoft"?"Premium":"No premium",")"]},t.id))})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Buscar instancia"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:$,onChange:t=>l(t.target.value),placeholder:"Buscar por nombre...",className:"w-full p-3 pl-10 bg-gray-800/50 border border-gray-700/50 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]})]}),e.jsxs("div",{className:"mb-6 flex flex-wrap gap-3 justify-end",children:[e.jsxs("button",{onClick:()=>Q(!0),className:"px-6 py-3 bg-gradient-to-r from-yellow-600 to-orange-600 hover:from-yellow-500 hover:to-orange-500 text-white rounded-xl transition-all duration-300 shadow-lg shadow-yellow-500/20 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Importar Instancia"]}),e.jsxs("button",{onClick:()=>G(!0),className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 text-white rounded-xl transition-all duration-300 shadow-lg shadow-blue-500/20 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Crear Instancia"]})]}),ee.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"mx-auto w-24 h-24 bg-gray-800/50 rounded-full flex items-center justify-center mb-4",children:e.jsx("svg",{className:"w-12 h-12 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-300 mb-2",children:"No hay instancias"}),e.jsx("p",{className:"text-gray-500",children:"Crea una nueva instancia para comenzar a jugar"}),e.jsx("button",{onClick:()=>G(!0),className:"mt-4 px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 text-white rounded-xl transition-all duration-300",children:"Crear Primera Instancia"})]}):e.jsx(J.div,{layout:!0,className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:ee.map(t=>e.jsxs(J.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},whileHover:{y:-5},className:"bg-gray-800/50 backdrop-blur-sm border border-gray-700/50 rounded-xl p-4 transition-all duration-300 hover:bg-gray-800/70 hover:border-gray-600/50",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-white truncate max-w-[70%]",children:t.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:"text-xs bg-gray-700/50 text-gray-300 px-2 py-1 rounded-full",children:t.version}),t.loader&&e.jsx("span",{className:"text-xs bg-blue-900/50 text-blue-300 px-2 py-1 rounded-full",children:t.loader}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${t.type==="owned"?"bg-green-900/50 text-green-300":t.type==="imported"?"bg-yellow-900/50 text-yellow-300":"bg-purple-900/50 text-purple-300"}`,children:t.type==="owned"?"Creada":t.type==="imported"?"Importada":"Compartida"})]})]}),e.jsx("div",{className:"text-xs text-gray-400",children:new Date(t.createdAt).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"})})]}),e.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-400",children:[e.jsxs("div",{children:["Jugado: ",t.lastPlayed?new Date(t.lastPlayed).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"}):"Nunca"]}),e.jsxs("div",{children:["Tiempo total: ",t.totalTimePlayed?(()=>{const n=Math.floor(t.totalTimePlayed/6e4);if(n<60)return`${n} min`;if(n<1440){const u=Math.floor(n/60),S=n%60;return`${u}h ${S}min`}else{const u=Math.floor(n/1440),S=Math.floor(n%1440/60);return`${u}d ${S}h`}})():"0 min"]})]}),!x(t)&&e.jsx("div",{className:"text-xs bg-yellow-900/50 text-yellow-300 px-2 py-1 rounded-full",children:"Pendiente"})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>he(t.id),className:`flex-1 min-w-[70px] px-3 py-2 rounded-lg transition-colors text-sm ${x(t)?"bg-green-600 hover:bg-green-500 text-white":"bg-gray-700 hover:bg-gray-600 text-gray-400 cursor-not-allowed"}`,disabled:!x(t),children:x(t)?"Jugar":"Pendiente"}),e.jsx("button",{onClick:()=>ie(t.id),className:"flex-1 min-w-[70px] px-3 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors text-sm",children:"Carpeta"}),e.jsx("button",{onClick:()=>ye(t),className:"px-3 py-2 bg-blue-700 hover:bg-blue-600 text-white rounded-lg transition-colors text-sm",title:"Editar Instancia",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{onClick:()=>{Y(t),le(!0)},className:"px-3 py-2 bg-purple-700 hover:bg-purple-600 text-white rounded-lg transition-colors text-sm",title:"Ver Logs",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsx("button",{onClick:()=>je(t),className:"px-3 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors text-sm",title:"Ver Detalles",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("button",{onClick:()=>_(t.id),className:"px-3 py-2 bg-red-700 hover:bg-red-600 text-white rounded-lg transition-colors text-sm",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},t.id))}),e.jsx("div",{className:"mt-8 text-center text-gray-500 text-sm",children:e.jsxs("p",{children:[ee.length," instancia",ee.length!==1?"s":""," encontrada",ee.length!==1?"s":""]})})]}),e.jsx(Me,{instance:re,isOpen:U,onClose:()=>O(!1),onPlay:he,onOpenFolder:ie}),e.jsx(de,{children:X&&e.jsx(J.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs(J.div,{initial:{scale:.95,y:20},animate:{scale:1,y:0},exit:{scale:.95,y:20},className:"bg-gray-800/90 border border-gray-700/50 rounded-xl p-6 w-full max-w-md",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Importar Instancia"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Tipo de importación"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{type:"button",onClick:()=>ne("link"),className:`flex-1 py-2 rounded-lg border ${H==="link"?"bg-blue-600 border-blue-500 text-white":"bg-gray-700/50 border-gray-600 text-gray-300"}`,children:"Link"}),e.jsx("button",{type:"button",onClick:()=>ne("folder"),className:`flex-1 py-2 rounded-lg border ${H==="folder"?"bg-blue-600 border-blue-500 text-white":"bg-gray-700/50 border-gray-600 text-gray-300"}`,children:"Carpeta"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:H==="link"?"URL de la instancia":"Ruta de la carpeta"}),e.jsx("input",{type:"text",value:W,onChange:t=>R(t.target.value),placeholder:H==="link"?"https://ejemplo.com/instancia.zip":"C:/ruta/a/la/carpeta",className:"w-full p-3 bg-gray-700/50 border border-gray-600/50 rounded-xl text-white"})]}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{onClick:()=>{Q(!1),R("")},className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors",children:"Cancelar"}),e.jsx("button",{onClick:async()=>{if(!W.trim()){b("Por favor, introduce una URL o ruta válida");return}await we(W),Q(!1),R("")},className:"px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg transition-colors",children:"Importar"})]})]})})}),e.jsx(Ne,{isOpen:ce,onClose:()=>G(!1),onCreated:()=>{d(),xe.showNotification({type:"success",title:"Instancia creada",message:"La instancia se está descargando. Aparecerá cuando termine la descarga.",duration:4e3})}}),e.jsx(ke,{isOpen:B,title:"Eliminar Instancia",message:`¿Estás seguro de que quieres eliminar la instancia "${k==null?void 0:k.name}"? Esta acción no se puede deshacer y eliminará permanentemente todos los archivos de la instancia.`,confirmText:"Eliminar",cancelText:"Cancelar",confirmColor:"danger",onConfirm:Z,onCancel:()=>{P(!1),I(null)}}),w&&e.jsx(Ce,{instance:w,isOpen:!!w,onClose:ge,onSave:ve,onDelete:_}),K&&e.jsx(Le,{instanceId:K.id,instanceName:K.name,isOpen:me,onClose:()=>{le(!1),Y(null)}})]})}const Me=({instance:s,isOpen:y,onClose:v,onPlay:V,onOpenFolder:N})=>{if(!y||!s)return null;const j=c=>new Date(c).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),C=c=>{if(!c)return"0 min";const g=Math.floor(c/(1e3*60));if(g<60)return`${g} min`;if(g<1440){const i=Math.floor(g/60),p=g%60;return`${i}h ${p}min`}else{const i=Math.floor(g/1440),p=Math.floor(g%1440/60);return`${i}d ${p}h`}};return e.jsx(de,{children:y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm",children:e.jsx(J.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"w-full max-w-2xl",children:e.jsx("div",{className:"bg-gray-800/95 border border-gray-700/50 rounded-xl shadow-2xl overflow-hidden backdrop-blur-sm",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-1",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("span",{className:"text-sm bg-gray-700/50 text-gray-300 px-3 py-1 rounded-full",children:s.version}),s.loader&&e.jsx("span",{className:"text-sm bg-blue-900/50 text-blue-300 px-3 py-1 rounded-full",children:s.loader}),e.jsx("span",{className:"text-sm bg-green-900/50 text-green-300 px-3 py-1 rounded-full",children:"Instancia"})]})]}),e.jsx("button",{onClick:v,className:"p-2 text-gray-400 hover:text-white hover:bg-gray-700/50 rounded-full transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-700/30 p-4 rounded-xl",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Información General"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"ID:"}),e.jsxs("span",{className:"text-white font-mono text-sm",children:[s.id.substring(0,8),"..."]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Versión:"}),e.jsx("span",{className:"text-white",children:s.version})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Loader:"}),e.jsx("span",{className:"text-white",children:s.loader||"Vanilla"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Creada:"}),e.jsx("span",{className:"text-white",children:j(s.createdAt)})]})]})]}),e.jsxs("div",{className:"bg-gray-700/30 p-4 rounded-xl",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Estadísticas de Juego"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Última sesión:"}),e.jsx("span",{className:"text-white",children:s.lastPlayed?j(s.lastPlayed):"Nunca"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Tiempo total:"}),e.jsx("span",{className:"text-white",children:C(s.totalTimePlayed)})]})]})]})]}),e.jsxs("div",{className:"mt-6 bg-gray-700/30 p-4 rounded-xl",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Ubicación"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-gray-300 text-sm font-mono break-all",children:s.path}),e.jsx("button",{onClick:()=>N(s.id),className:"ml-4 px-4 py-2 bg-gray-600 hover:bg-gray-500 text-white rounded-lg transition-colors text-sm",children:"Abrir carpeta"})]})]}),e.jsx("div",{className:"mt-6 flex justify-end space-x-3",children:e.jsxs("button",{onClick:()=>V(s.id),className:"px-6 py-3 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 text-white rounded-lg transition-all flex items-center gap-2",children:[e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),"Jugar"]})})]})})})})})};export{Je as default};
