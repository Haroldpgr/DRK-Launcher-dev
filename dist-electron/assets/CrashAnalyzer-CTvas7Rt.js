var ae=Object.defineProperty;var ne=(m,t,a)=>t in m?ae(m,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):m[t]=a;var v=(m,t,a)=>ne(m,typeof t!="symbol"?t+"":t,a);import{j as e,r as i}from"./index-DLrAiYlZ.js";import{C as P}from"./Card-BfjD9kAV.js";import{B as q}from"./Button-DfyUaEO7.js";class oe{constructor(){v(this,"apiKey",null);v(this,"baseURL","https://openrouter.ai/api/v1/chat/completions");v(this,"currentConversationId",null);v(this,"maxMessagesPerConversation",5);v(this,"conversationTimeout",36e5);v(this,"last429ErrorTime",0);v(this,"cooldownPeriod",3e4);const t=localStorage.getItem("openrouter-api-key");if(t)this.apiKey=t;else{const a="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";localStorage.setItem("openrouter-api-key",a),this.apiKey=a}this.startNewConversation()}startNewConversation(){const t=`conv_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,a={id:t,messages:[],createdAt:Date.now(),lastActive:Date.now(),isActive:!0};this.currentConversationId=t,this.saveConversation(a)}getConversation(t){const a=localStorage.getItem("ai_conversations")||"{}";let o={};try{o=JSON.parse(a)}catch(c){console.error("Error al parsear conversaciones:",c)}return o[t]||null}saveConversation(t){const a=localStorage.getItem("ai_conversations")||"{}";let o={};try{o=JSON.parse(a)}catch{o={}}o[t.id]=t,localStorage.setItem("ai_conversations",JSON.stringify(o))}updateConversationLastActive(){if(!this.currentConversationId)return;const t=this.getConversation(this.currentConversationId);t&&(t.lastActive=Date.now(),this.saveConversation(t))}checkConversationTimeout(){if(!this.currentConversationId)return!1;const t=this.getConversation(this.currentConversationId);return t&&Date.now()-t.lastActive>this.conversationTimeout?(t.isActive=!1,this.saveConversation(t),!0):!1}async makeRequest(t,a=""){if(this.checkConversationTimeout())return"Esta conversaci贸n ha expirado por inactividad. Por favor, inicia una nueva conversaci贸n.";this.currentConversationId||this.startNewConversation();const o=this.getConversation(this.currentConversationId);if(!o)return this.startNewConversation(),await this.makeRequest(t,a);if(o.messages.length>=this.maxMessagesPerConversation*2)return`Has alcanzado el l铆mite de ${this.maxMessagesPerConversation} interacciones (10 mensajes totales) en esta conversaci贸n.`;const c=Date.now();if(c-this.last429ErrorTime<this.cooldownPeriod)return`La IA est谩 temporalmente ocupada. Por favor, espera ${Math.ceil((this.cooldownPeriod-(c-this.last429ErrorTime))/1e3)} segundos antes de enviar otra pregunta.`;if(!(this.apiKey||localStorage.getItem("openrouter-api-key")))return"Por favor, configura tu clave de API de OpenRouter.";try{const r=await this.getAIResponseFromAPI(t,a),x={id:`msg_user_${Date.now()}`,role:"user",content:t,timestamp:Date.now()},l={id:`msg_ai_${Date.now()}`,role:"assistant",content:r,timestamp:Date.now()};return o.messages.push(x,l),o.lastActive=Date.now(),this.saveConversation(o),r}catch(r){if(console.error("Error al llamar a la API de OpenRouter:",r),r.message){if(r.message.includes("401")||r.message.includes("Unauthorized"))return"Clave de API inv谩lida. Por favor, verifica tu clave de API.";if(r.message.includes("429"))return this.last429ErrorTime=Date.now(),"Demasiadas solicitudes al proveedor. La IA est谩 temporalmente ocupada, por favor espera un momento."}return`Error: ${r.message||"Error desconocido"}`}}async getAIResponseFromAPI(t,a=""){var x;const o=this.apiKey||localStorage.getItem("openrouter-api-key");if(!o)throw new Error("No se encontr贸 la clave de API.");const c=[{role:"system",content:`Eres un asistente de IA experto en Minecraft. ANALIZA CUIDADOSAMENTE cada entrada.
        Comprende completamente el problema antes de responder.
        Proporciona respuestas precisas, detalladas y directamente relacionadas con la pregunta.`},...a?[{role:"system",content:`ANLISIS DEL CONTEXTO:

${a}`}]:[],{role:"user",content:`Analiza y responde detalladamente:

${t}`}],h=new AbortController,r=setTimeout(()=>h.abort(),45e3);try{const l=await fetch(this.baseURL,{method:"POST",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:JSON.stringify({model:"qwen/qwen3-235b-a22b:free",messages:c,temperature:.7,max_tokens:1500,top_p:.9}),signal:h.signal});if(clearTimeout(r),!l.ok){const N=((x=(await l.json().catch(()=>({}))).error)==null?void 0:x.message)||l.statusText,w=l.status;if(w===429)return"Demasiadas solicitudes al proveedor de IA. La IA est谩 temporalmente ocupada, por favor intenta de nuevo en unos momentos.";throw new Error(`${w} - ${N}`)}return(await l.json()).choices[0].message.content}catch(l){if(clearTimeout(r),l.name==="AbortError")return"Tiempo de espera agotado. La solicitud tard贸 demasiado en procesarse.";throw l}}async getResponse(t,a=""){try{return await this.makeRequest(t,a)}catch(o){return`Error: ${o.message}`}}setApiKey(t){this.apiKey=t,localStorage.setItem("openrouter-api-key",t)}hasApiKey(){return this.apiKey!==null}resetMessageCount(){this.messageCount=0}getMessageCount(){return this.messageCount}}const U=new oe,ie=({isOpen:m,title:t,message:a,onConfirm:o,onCancel:c,confirmText:h="Confirmar",cancelText:r="Cancelar",confirmColor:x="danger"})=>{if(!m)return null;const l={primary:"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500",danger:"bg-red-600 hover:bg-red-700 focus:ring-red-500",warning:"bg-yellow-600 hover:bg-yellow-700 focus:ring-yellow-500",success:"bg-green-600 hover:bg-green-700 focus:ring-green-500"};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6 max-w-md w-full mx-4 transform transition-all duration-200 scale-100 opacity-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[e.jsx("span",{className:"bg-red-500/20 p-2 rounded-lg",children:e.jsx("svg",{className:"w-5 h-5 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),t]}),e.jsx("button",{onClick:c,className:"text-gray-400 hover:text-white p-1 rounded-full hover:bg-gray-700 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"mb-6",children:e.jsx("p",{className:"text-gray-300",children:a})}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:c,className:"px-4 py-2 bg-gray-700 text-gray-300 rounded-lg hover:bg-gray-600 transition-colors font-medium",children:r}),e.jsx("button",{onClick:o,className:`px-4 py-2 text-white rounded-lg transition-colors font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-${x}-500 ${l[x]}`,children:h})]})]})})};function he(){const[m,t]=i.useState([]),[a,o]=i.useState(""),[c,h]=i.useState([]),[r,x]=i.useState(null),[l,L]=i.useState(null),[O,N]=i.useState(""),[w,K]=i.useState([]),[S,C]=i.useState(!1),[I,A]=i.useState("logs"),[j,B]=i.useState(""),[E,k]=i.useState({}),[M,_]=i.useState(!1),[le,V]=i.useState(!0),[u,W]=i.useState(0),[f]=i.useState(5),[g,D]=i.useState({isOpen:!1,crashId:null,crashName:null}),R=i.useRef(null),J=i.useRef(null);i.useEffect(()=>{window.api.instances.list().then(s=>t(s)),window.api.crash.list().then(s=>h(s)),V(U.hasApiKey())},[]),i.useEffect(()=>{r&&G(r.logPath)},[r]),i.useEffect(()=>{Q()},[E,r,I]);const Q=()=>{R.current&&R.current.scrollIntoView({behavior:"smooth"})},G=async s=>{try{C(!0);const n=await window.api.logs.readLog(s);N(n);const d=n.split(`
`).map((y,T)=>{const p=y.match(/^\[([^\]]+)\]/),b=y.match(/INFO|WARN|ERROR|FATAL|DEBUG/);return{timestamp:p?p[1]:`L铆nea ${T+1}`,level:b?b[0]:"INFO",message:y}});K(d)}catch(n){console.error("Error al leer el archivo de log:",n),N("Error al cargar el contenido del log"),K([])}finally{C(!1)}},X=async()=>{if(a)try{C(!0);const s=await window.api.crash.analyze({instanceId:a});s&&(h(n=>[s,...n]),x(s),A("logs"))}catch(s){console.error("Error al analizar crash:",s)}finally{C(!1)}},Z=s=>{x(s);const n=m.find(d=>d.id===s.instanceId);L(n||null),A("logs"),W(0)},Y=(s,n,d)=>{d.stopPropagation(),D({isOpen:!0,crashId:s,crashName:n})},ee=async()=>{if(g.crashId)try{await window.api.crash.delete(g.crashId);const s=c.filter(n=>n.id!==g.crashId);h(s),r&&r.id===g.crashId&&(x(null),L(null)),k(n=>{const d={...n};return delete d[g.crashId],d})}catch(s){console.error("Error al eliminar el archivo de crash:",s),alert("Error al eliminar el archivo de crash: "+s.message)}finally{D({isOpen:!1,crashId:null,crashName:null})}},se=()=>{D({isOpen:!1,crashId:null,crashName:null})},F=async()=>{if(!j.trim()||!r||u>=f)return;const n={id:Date.now().toString(),role:"user",content:j,timestamp:new Date},y=[...E[r.id]||[],n];k(p=>({...p,[r.id]:y}));const T=j;B(""),_(!0);try{const p=r?O.substring(0,2e3):"",b=await U.getResponse(T,p),$={id:(Date.now()+1).toString(),role:"assistant",content:b,timestamp:new Date};k(z=>({...z,[r.id]:[...y,$]})),W(z=>z+1)}catch(p){console.error("Error en el asistente Qwen:",p);const b={id:(Date.now()+1).toString(),role:"assistant",content:"Lo siento, hubo un error al procesar tu solicitud. Por favor, int茅ntalo de nuevo.",timestamp:new Date};k($=>({...$,[r.id]:[...y,b]}))}finally{_(!1)}},te=s=>{s.key==="Enter"&&!s.shiftKey&&(s.preventDefault(),F())},re=s=>{switch(s){case"ERROR":case"FATAL":return"text-red-400";case"WARN":return"text-yellow-600";case"DEBUG":return"text-blue-400";default:return"text-gray-300"}},H=r?E[r.id]||[]:[];return e.jsxs("div",{className:"flex flex-col h-full bg-gradient-to-br from-gray-900 to-gray-800 p-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-blue-400 to-indigo-500 bg-clip-text text-transparent",children:"Analizador de Crashes"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Diagn贸stico y resoluci贸n de problemas de Minecraft"})]}),e.jsxs("div",{className:"flex gap-4 h-[calc(100vh-100px)]",children:[e.jsxs("div",{className:"w-72 flex flex-col gap-4",children:[e.jsxs(P,{className:"p-4 bg-gray-800/70 backdrop-blur-sm border border-gray-700/50",children:[e.jsxs("h3",{className:"font-semibold text-sm mb-2 text-white flex items-center gap-2",children:[e.jsx("span",{className:"bg-blue-500/20 p-1.5 rounded-lg",children:e.jsx("svg",{className:"w-4 h-4 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 12.55a11 11 0 0114.08 0M12 8v4l2 2m4 0a9 9 0 11-18 0 9 9 0 0118 0z"})})}),"Seleccionar Instancia"]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("select",{value:a,onChange:s=>o(s.target.value),className:"bg-gray-700/60 border border-gray-600 rounded-lg px-3 py-2 text-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[e.jsx("option",{value:"",children:"Selecciona una instancia"}),m.map(s=>e.jsx("option",{value:s.id,className:"bg-gray-700",children:s.name},s.id))]}),e.jsx(q,{onClick:X,disabled:!a||S,className:"w-full py-2 text-sm font-medium transition-all",children:S?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Analizando..."]}):"Analizar Crash"})]})]}),e.jsxs(P,{className:"p-4 bg-gray-800/70 backdrop-blur-sm border border-gray-700/50 flex-1 h-[calc(100vh-200px)]",children:[e.jsxs("h3",{className:"font-semibold text-sm mb-2 text-white flex items-center gap-2",children:[e.jsx("span",{className:"bg-red-500/20 p-1.5 rounded-lg",children:e.jsx("svg",{className:"w-4 h-4 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),"Crashes Recientes"]}),e.jsx("div",{className:"space-y-2 overflow-y-auto h-[calc(100%-40px)] pr-1",children:c.length===0?e.jsxs("div",{className:"text-center py-6",children:[e.jsx("div",{className:"text-gray-500 text-sm mb-1",children:"No hay crashes registrados"}),e.jsx("div",{className:"text-xs text-gray-600",children:"Analiza una instancia para detectar crashes"})]}):c.map(s=>{const n=m.find(d=>d.id===s.instanceId);return e.jsxs("div",{className:`p-2.5 rounded-lg cursor-pointer transition-all duration-200 ${(r==null?void 0:r.id)===s.id?"bg-gradient-to-r from-blue-600/20 to-indigo-600/20 border border-blue-500/30":"bg-gray-700/20 hover:bg-gray-700/40 border border-gray-600/20"}`,onClick:()=>Z(s),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"font-medium text-xs text-white truncate",children:(n==null?void 0:n.name)||"Instancia desconocida"}),e.jsx("button",{onClick:d=>Y(s.id,(n==null?void 0:n.name)||"Registro de crash",d),className:"text-gray-500 hover:text-red-500 p-1 rounded hover:bg-red-500/10 transition-colors",title:"Eliminar crash",children:e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),e.jsxs("div",{className:"text-xs text-gray-400 mt-1 flex items-center justify-between",children:[e.jsx("span",{children:new Date(s.createdAt).toLocaleDateString()}),e.jsx("span",{children:new Date(s.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),e.jsx("div",{className:"text-xs text-gray-300 mt-1 truncate",title:s.summary,children:s.summary})]},s.id)})})]})]}),e.jsx("div",{className:"flex-1 flex flex-col gap-4",children:r?e.jsxs(e.Fragment,{children:[e.jsxs(P,{className:"p-3 bg-gray-800/70 backdrop-blur-sm border border-gray-700/50",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[e.jsxs("div",{className:"bg-gray-700/20 p-2 rounded text-center",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Instancia"}),e.jsx("div",{className:"text-xs font-medium text-white truncate",children:(l==null?void 0:l.name)||"Desconocida"})]}),e.jsxs("div",{className:"bg-gray-700/20 p-2 rounded text-center",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"ID"}),e.jsxs("div",{className:"text-xs font-medium text-white truncate",children:[r.instanceId.substring(0,8),"..."]})]}),e.jsxs("div",{className:"bg-gray-700/20 p-2 rounded text-center",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Fecha"}),e.jsx("div",{className:"text-xs font-medium text-white",children:new Date(r.createdAt).toLocaleString()})]}),e.jsxs("div",{className:"bg-gray-700/20 p-2 rounded text-center",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Estado"}),e.jsx("div",{className:"text-xs font-medium text-green-400",children:"Analizado"})]})]}),e.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Resumen"}),e.jsx("div",{className:"text-xs text-white",children:r.summary})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Recomendaci贸n"}),e.jsx("div",{className:"text-xs text-white",children:r.recommendation||"No hay recomendaciones"})]})]})]}),e.jsxs("div",{className:"flex bg-gray-800/50 rounded-lg p-1 border border-gray-700/50",children:[e.jsx("button",{className:`flex-1 py-2 px-3 rounded-md text-sm font-medium transition-all ${I==="logs"?"bg-blue-600/80 text-white shadow":"text-gray-400 hover:text-gray-300"}`,onClick:()=>A("logs"),children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Logs"]})}),e.jsx("button",{className:`flex-1 py-2 px-3 rounded-md text-sm font-medium transition-all ${I==="ai"?"bg-blue-600/80 text-white shadow":"text-gray-400 hover:text-gray-300"}`,onClick:()=>A("ai"),children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"IA Qwen"]})})]}),e.jsx("div",{className:"flex-1 flex flex-col bg-gray-800/50 rounded-lg overflow-hidden border border-gray-700/50",children:I==="logs"?e.jsx("div",{className:"flex-1 overflow-y-auto p-3 bg-gray-900/10",children:S?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 border-2 border-blue-500/30 border-t-blue-500 rounded-full animate-spin"}),e.jsx("div",{className:"text-white text-sm",children:"Cargando logs..."})]})}):w.length===0?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center text-gray-500",children:[e.jsx("div",{className:"text-2xl mb-1",children:""}),e.jsx("div",{className:"text-sm",children:"No hay logs disponibles"})]})}):e.jsx("div",{className:"space-y-0.5 font-mono text-xs bg-gray-900/20 p-3 rounded",children:w.map((s,n)=>e.jsxs("div",{className:"flex py-0.5 hover:bg-gray-800/20 px-1 rounded text-[9px]",children:[e.jsx("span",{className:"text-gray-500 mr-2 w-24 flex-shrink-0 font-normal truncate",children:s.timestamp}),e.jsx("span",{className:`mr-2 w-10 flex-shrink-0 font-semibold ${re(s.level)} truncate`,children:s.level}),e.jsx("span",{className:"flex-1 break-words text-gray-200 font-light",children:s.message})]},n))})}):e.jsxs("div",{className:"flex-1 flex flex-col bg-gray-900/10",children:[e.jsxs("div",{ref:J,className:"flex-1 overflow-y-auto p-3 space-y-3",children:[H.length===0?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-500",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx("span",{className:"text-lg",children:""})}),e.jsx("h3",{className:"text-lg font-semibold text-white mb-1",children:"Asistente de IA"}),e.jsx("p",{className:"text-sm",children:"Pregunta sobre el crash o problemas de Minecraft"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 max-w-xs w-full",children:[e.jsx("div",{className:"bg-gray-800/20 p-2 rounded text-center",children:e.jsx("div",{className:"text-xs text-gray-400 mb-0.5",children:"驴Qu茅 caus贸 el error?"})}),e.jsx("div",{className:"bg-gray-800/20 p-2 rounded text-center",children:e.jsx("div",{className:"text-xs text-gray-400 mb-0.5",children:"驴C贸mo lo soluciono?"})}),e.jsx("div",{className:"bg-gray-800/20 p-2 rounded text-center",children:e.jsx("div",{className:"text-xs text-gray-400 mb-0.5",children:"Mods conflictivos"})}),e.jsx("div",{className:"bg-gray-800/20 p-2 rounded text-center",children:e.jsx("div",{className:"text-xs text-gray-400 mb-0.5",children:"Configuraci贸n 贸ptima"})})]})]}):H.map(s=>e.jsx("div",{className:`flex ${s.role==="user"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[85%] rounded-xl p-3 text-sm ${s.role==="user"?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-br-none":"bg-gray-700/50 text-gray-100 rounded-bl-none"}`,children:[e.jsx("div",{className:"whitespace-pre-wrap break-words",children:s.content}),e.jsx("div",{className:`text-xs mt-1 opacity-70 ${s.role==="user"?"text-blue-100":"text-gray-400"}`,children:s.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},s.id)),e.jsx("div",{ref:R})]}),e.jsxs("div",{className:"border-t border-gray-700 p-3 bg-gray-800/20",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:`flex-1 rounded-lg overflow-hidden ${u>=f?"bg-gray-700/30 border border-red-500/50":"bg-gray-700/50 border border-gray-600/50"}`,children:e.jsx("textarea",{value:j,onChange:s=>B(s.target.value),onKeyDown:te,placeholder:u>=f?"Has alcanzado el l铆mite de mensajes":"Escribe tu pregunta...",className:"w-full bg-transparent text-white py-2 px-3 text-sm focus:outline-none resize-none max-h-20",disabled:M||u>=f,rows:1})}),e.jsx(q,{onClick:F,disabled:!j.trim()||M||!r||u>=f,className:"h-10 px-4 flex items-center justify-center",children:M?e.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 5l7 7-7 7M5 5l7 7-7 7"})})})]}),e.jsxs("div",{className:"flex justify-between items-center mt-1",children:[e.jsx("p",{className:"text-xs text-gray-500",children:u<f?"Asistente IA especializado en problemas de Minecraft":"L铆mite de mensajes alcanzado para esta conversaci贸n"}),e.jsx("div",{className:"flex gap-1 text-xs",children:e.jsxs("span",{className:`px-2 py-0.5 rounded text-xs ${u<3?"bg-green-900/50 text-green-400":u<5?"bg-yellow-900/50 text-yellow-400":"bg-red-900/50 text-red-400"}`,children:[u,"/",f]})})]})]})]})})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center bg-gray-800/50 rounded-lg border border-gray-700/50",children:e.jsxs("div",{className:"text-center text-gray-500",children:[e.jsx("div",{className:"text-4xl mb-2",children:""}),e.jsx("h3",{className:"text-lg font-semibold text-gray-300 mb-1",children:"Selecciona un crash"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Elige un crash de la lista para ver detalles"})]})})})]}),g.isOpen&&e.jsx(ie,{isOpen:g.isOpen,title:"Eliminar Registro de Crash",message:`驴Est谩s seguro de que deseas eliminar este registro de crash ${g.crashName?`"${g.crashName}"`:""}? Esta acci贸n no se puede deshacer.`,onConfirm:ee,onCancel:se,confirmText:"Eliminar",cancelText:"Cancelar",confirmColor:"danger"})]})}export{he as default};
